var LandingPage=Parse.View.extend({events:{"click .about":"scrollAbout"},template:_.template($(".landing-page-template").text()),aboutTemplate:_.template($(".about-template").text()),initialize:function(){$("html, body").scrollTop(0),$(".template-container").html(this.$el),this.$el.html(this.template()),$(".template-container").css("padding-top","50px"),$(".footer-template-container").show(),this.render(),this.fillCompanyInfo()},render:function(){$(".template-container").append(this.aboutTemplate)},scrollAbout:function(){$("html,body").animate({scrollTop:$(".about-us").offset().top},200)},fillCompanyInfo:function(){var a=new Parse.Query("user");a.limit(1500),a.find({success:function(a){$(".header-txt-lg").text(Parse.User.current().get("company")),$(".header-txt-p").text(Parse.User.current().get("tagline")),$(".about-title").text(Parse.User.current().get("aboutTitle")),$(".about-body").text(Parse.User.current().get("aboutBody"))},error:function(a){console.log(a+" it failed")}})}}),NavbarView=Parse.View.extend({el:$(".nav-template-container"),events:{"click .contact-us":"contactUs","click .about":"scrollAbout","click .home":"scrollHome"},homeTemplate:_.template($(".landing-page-template").text()),template:_.template($(".navbar-template").text()),initialize:function(a){this.router=a.router,$(".nav-template-container").html(this.$el),this.$el.html(this.template()),this.fillCompanyInfo()},contactUs:function(){$("html,body").animate({scrollTop:$(".footer").offset().top},200)},scrollAbout:function(){$("html,body").animate({scrollTop:$(".about-us").offset().top},200)},scrollHome:function(){$("html, body").animate({scrollTop:0},200)},fillCompanyInfo:function(){var a=new Parse.Query("user");a.limit(1500),a.find({success:function(a){$(".brand-logo-img").css("background",'url("'+Parse.User.current().get("logo")._url+'") no-repeat center').css("background-size","100%")},error:function(a){console.log(a+" it failed")}})}}),CoursesView=Parse.View.extend({events:{},template:_.template($(".courses-page-template").text()),courseInstanceTemplate:_.template($(".course-instance-template").text()),initialize:function(){console.log("courses view");$("html, body").scrollTop(0),$(".template-container").html(this.$el),this.$el.html(this.template()),this.getCourses()},getCourses:function(){var a=this,b=new Parse.Query("courseInstance");b.limit(1500),b.find({success:function(b){for(i=0;i<b.length;i++)$(".courses-template-list-container").prepend(a.courseInstanceTemplate({courseTitle:b[i].attributes.courseTitle,courseInstructor:b[i].attributes.courseInstructor,courseDescription:b[i].attributes.courseDescription,courseImage:b[i].attributes.logo._url}))},error:function(a){console.log("threw an error")}})}}),LocationsView=Parse.View.extend({events:{},template:_.template($(".all-locations-template").text()),locationInstanceTemplate:_.template($(".current-locations-live-template").text()),initialize:function(){console.log("courses view");$("html, body").scrollTop(0),$(".template-container").html(this.$el),this.$el.html(this.template()),this.getCourses()},getCourses:function(){var a=this,b=new Parse.Query("locationInstance");b.limit(1500),b.find({success:function(b){for(i=0;i<b.length;i++)$(".locations-list").prepend(a.locationInstanceTemplate({locationName:b[i].attributes.locationName,locationEmail:b[i].attributes.locationEmail,locationPhone:b[i].attributes.locationPhone,locationAddress:b[i].attributes.locationAddress}))},error:function(a){console.log("threw an error")}})}}),AboutView=Parse.View.extend({events:{},template:_.template($(".about-template").text()),initialize:function(){$("html, body").scrollTop(0),$(".template-container").html(this.$el),this.$el.html(this.template()),$(".about-nav").prop("disabled",!0)}}),FooterView=Parse.View.extend({el:$(".footer-template-container"),events:{},template:_.template($(".footer-template").text()),initialize:function(){console.log("footer is here"),$(".footer-template-container").html(this.$el),this.$el.html(this.template())}}),SignInPage=Parse.View.extend({events:{"click .submit-sign-in":"signIn","keydown .password-input":"enterSignIn","click .close":"closeAlert"},template:_.template($(".sign-in-template").text()),initialize:function(){$("html, body").scrollTop(0),$(".template-container").html(this.$el),this.$el.html(this.template()),this.render(),$(".username-input").focus()},render:function(){},signIn:function(a){this.logIn()},enterSignIn:function(a){var b=a.which;13==b&&this.signIn()},logIn:function(){var a=$(".username-input").val(),b=$(".password-input").val(),c=!0;_.each($(".sign-in-field"),function(a){return $(a).val().length<1?(console.log("it's empty, foo!"),void console.log(c)):(c=!1,console.log(c),c)}),0==c?Parse.User.logIn(a,b,{success:function(a){router.navigate("#admin",{trigger:!0}),console.log("logged in")},error:function(a,b){$(".username-input").val(""),$(".password-input").val(""),$(".username-input").focus(),$(".alert-danger").css({visibility:"visible",height:"auto","margin-bottom":"20px",padding:"15px"}),$(".alert-danger").html('<button type="button" class="close closeAlert" aria-label="Close"><span aria-hidden="true">&times;</span></button>Oh snap!<span class="alert-link">Make sure you filled out everything </span>and try submitting again.'),_.each($(".sign-in-field"),function(a){$(a).css("border","1px solid red")}),$(".alert-danger").html(""),$(".alert-danger").html('<button type="button" class="close closeAlert" aria-label="Close"><span aria-hidden="true">&times;</span></button>Oh Snap!, it looks like your <span class="alert-link">username</span> or <span class="alert-link">password</span> is incorrect.')}}):($(".alert-danger").css({visibility:"visible",height:"auto","margin-bottom":"20px",padding:"15px"}),_.each($(".sign-in-field"),function(a){$(a).css("border","1px solid red")}))},closeAlert:function(){$(".alert-danger").css({visibility:"hidden",height:"0px","margin-bottom":"0px",padding:"0px",overflow:"hidden"})}}),SignUpPage=Parse.View.extend({events:{"click .submit-sign-up":"signUp","keydown .email-input":"enterSignUp","click .close":"closeAlert"},template:_.template($(".sign-up-template").text()),initialize:function(){$("html, body").scrollTop(0),$(".template-container").html(this.$el),this.$el.html(this.template())},enterSignUp:function(a){console.log(a.which);var b=a.which;13==b&&this.signUp()},signUp:function(){var a=($(".username-input").val(),$(".password-input").val()),b=$(".email-input").val(),c=new Parse.User;c.set({username:userName,password:a,email:b}),console.log(c);var d=!0;if(_.each($(".sign-up-field"),function(a){return $(a).val().length<1?void console.log("it's empty, foo!"):d=!1}),console.log(d),d===!1){var e=this;c.signUp(null,{success:function(a){console.log(a),a.save(),$(".template-container").html(""),e.remove(),router.swap(new AdminPage)},error:function(a,b){console.log("Error: "+b.code+" "+b.message)}})}else $(".alert-danger").css({visibility:"visible",height:"auto","margin-bottom":"20px",padding:"15px"}),_.each($(".sign-up-field"),function(a){$(a).css("border","1px solid red")})},closeAlert:function(){$(".alert-danger").css({visibility:"hidden",height:"0px","margin-bottom":"0px",padding:"0px",overflow:"hidden"})}}),AdminPage=Parse.View.extend({events:{"click .edit-profile-button":"toggleEditAttribute","click .save-profile-edit-button":"saveProfileEdit","change #myFile":"readURL"},template:_.template($(".admin-template").text()),initialize:function(){null===Parse.User.current()==!0?router.navigate("#",{trigger:!0}):($("html, body").scrollTop(0),$(".template-container").html(this.$el),this.$el.html(this.template()),this.render(),Parse.User.current().get("logo")&&(console.log(Parse.User.current().get("logo")._url),$("#logo-img").attr("src",Parse.User.current().get("logo")._url)),$(".footer-template-container").hide(),$(".main-nav").hide(),$(".template-container").css("padding-top","80px"),this.readURL)},render:function(){},readURL:function(){console.log($("#myFile")[0]);var a=document.getElementById("myFile"),b="";if("files"in a){var c=new FileReader;c.readAsDataURL(a.files[0]),c.onload=function(a){document.getElementById("logo-img").src=a.target.result}}else""==a.value?b+="Select one or more files.":(b+="The files property is not supported by your browser!",b+="<br>The path of the selected file: "+a.value)},toggleEditAttribute:function(){$(event.target).hasClass("active")?(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled","disabled")}),$(".save-profile-edit-button").css("opacity",0),$(event.target).removeClass("active")):(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled",!1)}),$(".save-profile-edit-button").css("opacity",1),$(event.target).addClass("active"))},saveProfileEdit:function(){var a=function(){var a=$("#myFile")[0];if(a.files.length>0){var b=a.files[0],c="photo.jpg";return new Parse.File(c,b)}return 0===a.files.length?Parse.User.current().get("photo"):void 0};Parse.User.current().set({company:0!=$(".company-input").val().length?$(".company-input").val():Parse.User.current().get("company"),email:0!=$(".email-input").val().length?$(".email-input").val():Parse.User.current().get("email"),tagline:0!=$(".tagline-input").val().length?$(".tagline-input").val():Parse.User.current().get("tagline"),logo:void 0!=a()?a():Parse.User.current().get("logo")}).save(),console.log(a()),$(".edit-profile-button").click(),$(".profile-edit").val(""),$(".company-input").prop("placeholder",Parse.User.current().get("company")),$(".email-input").prop("placeholder",Parse.User.current().get("email")),$(".tagline-input").prop("placeholder",Parse.User.current().get("tagline"))}}),AboutAdminPage=Parse.View.extend({events:{"click .edit-profile-button":"toggleEditAttribute","click .save-profile-edit-button":"saveProfileEdit"},template:_.template($(".about-admin-template").text()),initialize:function(){null===Parse.User.current()==!0?router.navigate("#",{trigger:!0}):($("html, body").scrollTop(0),$(".template-container").html(this.$el),this.$el.html(this.template()),$(".template-container").css("padding-top","80px"),this.render())},render:function(){},toggleEditAttribute:function(){$(event.target).hasClass("active")?(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled","disabled")}),$(event.target).removeClass("active")):(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled",!1)}),$(event.target).addClass("active"))},saveProfileEdit:function(){var a=$(".about-body-textarea").val();a=a.replace(/\r?\n/g,"<br/>"),Parse.User.current().set({aboutTitle:0!=$(".about-title-input").val().length?$(".about-title-input").val():Parse.User.current().get("aboutTitle"),aboutBody:0!=$(".about-body-textarea").val().trim().length?$(".about-body-textarea").val():Parse.User.current().get("aboutBody")}).save(),$(".edit-profile-button").click(),$(".profile-edit").val(""),$(".about-body-textarea").prop("placeholder",Parse.User.current().get("aboutBody")),$(".about-title-input").prop("placeholder",Parse.User.current().get("aboutTitle"))}}),CoursesAdminPage=Parse.View.extend({events:{"click .edit-profile-button":"toggleEditAttribute","change #myFile":"readURL","click .add-course":"addCourse","click .cancel-add":"cancelAddCourse","click .save-course-update-button":"updateCourse","click .delete-class":"deleteCourse","click .save-new-edit-button":"saveProfileEdit"},template:_.template($(".courses-admin-template").text()),detailTemplate:_.template($(".course-detail-template").text()),courseInstanceTemplate:_.template($(".add-course-detail-template").text()),initialize:function(){null===Parse.User.current()==!0?router.navigate("#",{trigger:!0}):($("html, body").scrollTop(0),$(".template-container").html(this.$el),this.$el.html(this.template()),this.render(),Parse.User.current().get("logo")&&$("#logo-img").attr("src",Parse.User.current().get("logo")._url),$(".template-container").css("padding-top","80px"),this.readURL,this.getCourses())},render:function(){},getCourses:function(){var a=this,b=new Parse.Query("courseInstance");b.limit(1500),b.find({success:function(b){for(i=0;i<b.length;i++)$(".courses-list-container").prepend(a.detailTemplate({courseTitle:b[i].attributes.courseTitle,courseInstructor:b[i].attributes.courseInstructor,courseDescription:b[i].attributes.courseDescription,courseImage:b[i].attributes.logo._url,courseId:b[i].id}))},error:function(a){console.log("threw an error")}})},readURL:function(){var a=document.getElementById("myFile"),b="";if("files"in a){var c=new FileReader;c.readAsDataURL(a.files[0]),c.onload=function(a){document.getElementById("logo-img").src=a.target.result}}else""==a.value?b+="Select one or more files.":(b+="The files property is not supported by your browser!",b+="<br>The path of the selected file: "+a.value)},toggleEditAttribute:function(){$(event.target).hasClass("active")?(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled","disabled"),$(".delete-class").prop("disabled",!0),$(".save-course-update-button").prop("disabled",!0)}),$(event.target).removeClass("active")):(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled",!1),$(".delete-class").prop("disabled",!1),$(".save-course-update-button").prop("disabled",!1)}),$(event.target).addClass("active"))},toggleAddCourseEdit:function(){$(event.target).hasClass("active")?(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled","disabled")}),$(event.target).removeClass("active")):(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled",!1)}),$(event.target).addClass("active"))},saveProfileEdit:function(){var a=this,b=Parse.Object.extend("courseInstance"),c=new b,d=function(){var a=$("#myFile")[0];if(a.files.length>0){var b=a.files[0],c="photo.jpg";return new Parse.File(c,b)}};c.set({courseTitle:0!=$(".course-title-input").val().length?$(".course-title-input").val():Parse.User.current().get("courseTitle"),courseInstructor:0!=$(".course-instructor-input").val().length?$(".course-instructor-input").val():Parse.User.current().get("courseInstructor"),courseDescription:0!=$(".course-description-textarea").val().trim().length?$(".course-description-textarea").val():Parse.User.current().get("courseDescription"),logo:void 0!=d()?d():Parse.User.current().get("logo")}).save().then(function(){a.cancelAddCourse(),$(".courses-list-container").html(""),a.getCourses()}),$(".edit-profile-button").click(),$(".profile-edit").val(""),$(".course-title-input").prop("placeholder",Parse.User.current().get("courseTitle")),$(".course-instructor-input").prop("placeholder",Parse.User.current().get("courseInstructor")),$(".course-description-textarea").prop("placeholder",Parse.User.current().get("courseDescription"))},updateCourse:function(){var a=event.target.id,b=function(){var a=$("#myFile")[0];if(a.files.length>0){var b=a.files[0],c="photo.jpg";return new Parse.File(c,b)}};_.each($(".course-detail-container"),function(c){if(c.id==a){var d=new Parse.Query("courseInstance");d.equalTo("objectId",a),d.limit(1500),d.find({success:function(a){a[0].set({courseTitle:$(c).find("input.course-title-input")[0].value.length>0?$(c).find("input.course-title-input")[0].value:a[0].get("courseTitle"),courseInstructor:$(c).find("input.course-instructor-input")[0].value.length>0?$(c).find("input.course-instructor-input")[0].value:a[0].get("courseInstructor"),courseDescription:$(c).find("textarea.course-description-textarea")[0].value.length>0?$(c).find("textarea.course-description-textarea")[0].value:a[0].get("courseDescription"),logo:void 0!=b()?b():a[0].get("logo")}).save().then(function(){router.swap(new CoursesAdminPage)})},error:function(a){console.log("no course was found")}})}})},addCourse:function(){$(".add-course").text("CANCEL").addClass("cancel-add").removeClass("add-course"),$(".course-add-container").prepend(this.courseInstanceTemplate),this.toggleEditAttribute()},deleteCourse:function(){var a=this,b=$(event.target).prop("id"),c=new Parse.Query("courseInstance");c.limit(1500),c.equalTo("objectId",b),c.find({success:function(c){c[0].destroy(),$("div#"+b).remove(),a.toggleEditAttribute()},error:function(a){console.log("unable to destroy")}})},cancelAddCourse:function(){$(".cancel-add").text("ADD +").addClass("add-course").removeClass("cancel-add"),$(".course-add-container").html(""),this.toggleEditAttribute(),$("html, body").scrollTop(0)}}),LocationsAdminPage=Parse.View.extend({events:{"click .edit-profile-button":"toggleEditAttribute","click .save-profile-edit-button":"saveNewLocation"},template:_.template($(".locations-container-template").text()),createTemplate:_.template($(".create-locations-template").text()),currentTemplate:_.template($(".current-locations-template").text()),initialize:function(){null===Parse.User.current()==!0?router.navigate("#",{trigger:!0}):($("html, body").scrollTop(0),$(".template-container").html(this.$el),this.$el.html(this.template()),$(".template-container").css("padding-top","80px"),this.render(),this.getLocations())},render:function(){$(".create-locations-container").append(this.createTemplate())},getLocations:function(){$(".all-locations-container").html("");var a=this,b=new Parse.Query("locationInstance");b.limit(1500),b.find({success:function(b){for(i=0;i<b.length;i++)$(".all-locations-container").prepend(a.currentTemplate({locationName:b[i].attributes.locationName,locationEmail:b[i].attributes.locationEmail,locationPhone:b[i].attributes.locationPhone,locationAddress:b[i].attributes.locationAddress}))},error:function(a){console.log("threw an error")}})},toggleEditAttribute:function(){$(event.target).hasClass("active")?(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled","disabled")}),$(event.target).removeClass("active")):(_.each($(".profile-edit"),function(){$(".profile-edit").prop("disabled",!1)}),$(event.target).addClass("active"))},saveNewLocation:function(){var a=this,b=Parse.Object.extend("locationInstance"),c=new b;c.set({locationName:$(".company-input").val(),locationEmail:$(".email-input").val(),locationPhone:$(".phone-input").val(),locationAddress:$(".address-input").val()}).save().then(function(){a.getLocations()})}}),AppRouter=Parse.Router.extend({routes:{"":"landingPage",about:"aboutPage",courses:"coursesPage",locations:"locationsPage","sign-in":"signInPage","sign-up":"signUpPage",admin:"adminPage","admin/about":"adminAboutPage","admin/courses":"adminCoursesPage","admin/instructors":"adminInstructorsPage","admin/locations":"adminLocationsPage"},initialize:function(){this.navOptions=null,this.currentView=null},landingPage:function(){this.swap(new LandingPage({router:this})),new NavbarView({router:this}),new FooterView({router:this}),$(".nav-template-container").show()},aboutPage:function(){this.swap(new AboutView({router:this})),new NavbarView({router:this}),new FooterView({router:this})},coursesPage:function(){this.swap(new CoursesView({router:this})),new NavbarView({router:this}),new FooterView({router:this})},locationsPage:function(){this.swap(new LocationsView({router:this})),new NavbarView({router:this}),new FooterView({router:this})},signInPage:function(){this.swap(new SignInPage({router:this})),new NavbarView({router:this}),new FooterView({router:this})},signUpPage:function(){this.swap(new SignUpPage({router:this})),new NavbarView({router:this}),new FooterView({router:this})},adminPage:function(){this.swap(new AdminPage({router:this})),$(".nav-template-container").hide()},adminAboutPage:function(){this.swap(new AboutAdminPage({router:this}))},adminCoursesPage:function(){this.swap(new CoursesAdminPage({router:this}))},adminLocationsPage:function(){this.swap(new LocationsAdminPage({router:this}))},swap:function(a){this.currentView&&this.currentView.remove(),this.currentView=a}});Parse.initialize("yZXbx1cs1micyuuPRbtPCaLnO8U5aJ38L40RDoA1","el0M8ZBpgPMjBfmZvcZ5u673eeHAiWnZffpBieQy");var router=new AppRouter;Parse.history.start();